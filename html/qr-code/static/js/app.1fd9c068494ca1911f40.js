webpackJsonp([1],{NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("7+uW"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var r=a("VU/8")({name:"App"},o,!1,function(e){a("Zcw0")},null,null).exports,s=a("/ocq"),i=a("mvHQ"),p=a.n(i),l=(a("z5fg"),a("Z1I5")),u=a("qe0n"),d=a.n(u),c=a("mtWM"),m=a.n(c),v={components:{QrcodeVue:l.a},data:function(){return{bundleInfo:"",model:{appKey:"4fecoAqgCIUtzIyA4FAPgoyrc4oUc25c",path:"",query:"",source:""},schema:{fields:[{type:"input",inputType:"text",label:"App Key",model:"appKey",placeholder:"可在 小程序平台 => 设置 => 开发设置 中查询",required:!0},{type:"input",inputType:"text",label:"启动页面",model:"path",placeholder:"默认为首页。如：pages/index/index"},{type:"input",inputType:"text",label:"启动参数",model:"query",placeholder:"可以在 Page 的 onLoad  中获取。如：key=encodeURIComponent(value)"},{type:"input",inputType:"text",label:"进入场景",model:"source",required:!0,placeholder:"可以在 App 的 onLaunch 和 onShow 中获取。"}]},formOptions:{validateAfterChanged:!0},weburl:""}},computed:{size:function(){var e=document.documentElement.clientWidth;return e<925?e<=320?120:150:180},result:function(){var e=this.model,t=e.appKey,a=e.path,n=e.query,o=e.source;a.match(/^\//g)&&(a=a.slice(1)),a.match(/\/$/g)&&(a=a.slice(0,-1));var r=["swan"];t&&(t=t.trim()),/_dev\w+/.test(t)||(this.bundleInfo=""),t&&r.push(t),a&&r.push(a);var s={_baiduboxapp:encodeURIComponent(p()({from:o,ext:{}})),callback:"_bdbox_js_275",upgrade:0},i=this.paramsJoin(s),l="?"+(n?n+"&":"")+i;return r.push(l),"baiduboxapp://"+r.join("/")},isDev:function(){return this}},methods:{getBundleId:function(){var e=this,t=e.model.appKey;/_dev\w+/.test(t)&&(e.bundleInfo="Waiting...正在请求 bundleId",m.a.get(location.protocol+"//smartprogram.baidu.com/mappconsole/api/getScheme?key="+t).then(function(t){t.data.data&&t.data.data.bundleId?(e.model.appKey=t.data.data.bundleId,e.bundleInfo="获取的 bundleId 为 "+t.data.data.bundleId):e.bundleInfo="请输入正确的 appKey"}).catch(function(t){e.bundleInfo="获取 bundleId 失败。"}))},paramsJoin:function(e){if(e instanceof Object){var t=[];for(var a in e)t.push(a+"="+e[a]);return t.join("&")}return e},getWebUrl:function(){var e=[this.model.appKey.split("_")[0].replace(/[A-Z]/g,function(e){return e.toLowerCase()+"-"}),"smartapps","cn"].join(".")+"/"+this.model.path;return window.location.protocol+"//"+e+(this.model.query?"?"+this.model.query:"")},preview:function(){var e=this.getWebUrl();if(window.innerWidth<420)window.location.assign(e);else if(this.weburl===e){this.weburl="";var t=this;setTimeout(function(){t.weburl=e},500)}else this.weburl=e}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrap"},[a("div",{staticClass:"main"},[a("div",{staticClass:"title"},[e._v("百度智能小程序调起协议 && Web 化预览工具")]),e._v(" "),a("vue-form-generator",{attrs:{schema:e.schema,model:e.model,options:e.formOptions}}),e._v(" "),a("div",{staticClass:"result"},[a("qrcode-vue",{staticClass:"qrcode",attrs:{value:e.result,size:e.size,level:"H"}}),e._v(" "),a("textarea",{staticClass:"text",domProps:{value:e.result}})],1),e._v(" "),a("div",{staticClass:"foot"},[a("p",[e._v("Tips:")]),e._v(" "),a("p",[e._v("1、"),a("span",{staticClass:"button offline",on:{click:e.getBundleId}},[e._v("线下版本预览请点击这里")]),e._v(" "),e.bundleInfo?a("span",[e._v(e._s(e.bundleInfo))]):e._e()]),e._v(" "),a("p",[e._v("2、"),a("span",{directives:[{name:"tap",rawName:"v-tap",value:{methods:e.preview},expression:"{methods: preview}"}],staticClass:"button"},[e._v("Web 化预览请点击这里")]),e._v("（若 Web 化版本已经上线）")]),e._v(" "),e._m(0)])],1),e._v(" "),a("div",{staticClass:"preview"},[a("iframe",{attrs:{src:e.weburl,frameborder:"0",name:"preview",id:"webframe"}})])])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("3、如何使用特定的场景值打开开发者工具生成的预览版小程序：① 将 App Key 填写为 ${appKey}_${suffix} 或 ${bundleId}。比如 "),a("span",[e._v("4fecoAqgCIUtzIyA4FAPgoyrc4oUc25c_dev18505。")]),e._v("appKey 可在 "),a("span",[e._v("小程序平台 => 设置 => "),a("a",{attrs:{href:"https://smartprogram.baidu.com/mappconsole/main/set",target:"_blank"}},[e._v("开发设置")])]),e._v(" 中查询，suffix 或 bundleId 可在开发者工具预览生成的二维码上查看。② 填写场景值后，"),a("span",[a("a",{attrs:{href:"https://smartprogram.baidu.com/docs/data/scene/",target:"_blank"}},[e._v("（点击查看场景值文档）")])]),e._v("使用百度 App 扫描生成的二维码。")])}]},h=a("VU/8")(v,f,!1,null,null,null).exports;n.a.use(s.a);var b=new s.a({routes:[{path:"/",name:"HelloWorld",component:h}]});n.a.use(d.a),n.a.config.productionTip=!1,new n.a({el:"#app",router:b,components:{App:r},template:"<App/>"})},Zcw0:function(e,t){},z5fg:function(e,t){}},["NHnr"]);
//# sourceMappingURL=/qr-code/static/js/app.1fd9c068494ca1911f40.js.map